(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f8430dd"],{1232:function(t,e,i){"use strict";var s=i("b4bb"),a=i.n(s);a.a},b4bb:function(t,e,i){},c1b2:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column-view"},[i("div",{ref:"topBar"},[i("van-nav-bar",{attrs:{title:"上传图片","right-text":"任务详情","left-text":"返回",fixed:"","left-arrow":""},on:{"click-left":t.onNavBarLeftPressed,"click-right":t.onNavBarRightPressed}})],1),t.missionDetail?i("div",{staticClass:"under-nav top-section"},[i("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap"}},[i("span",[t._v("发布方：")]),i("img",{staticClass:"head-img",attrs:{src:t.imgFullPath(t.missionDetail.publishUserImgUrl),alt:""}}),i("span",{staticClass:"publish-name"},[t._v(t._s(t.missionDetail.publishUserName))]),i("span",{staticClass:"right-text"},[t._v("编号：")]),i("span",[t._v(t._s(t.missionDetail.id))])]),i("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap"}},[i("span",[t._v("类别：")]),i("span",[t._v(t._s(t.getMissionTypeName()))]),i("span",{staticClass:"right-text"},[t._v("单价：")]),i("span",[t._v(t._s(t.missionDetail.price/100)+"元")])]),i("span",[t._v("备注：")]),i("span",[t._v(t._s(t.missionDetail.remark))])]):t._e(),i("div",[t._m(0),i("van-swipe",{attrs:{autoplay:0,width:t.vanSwipeWidth,height:t.vanSwipeHeight,loop:!1,"show-indicators":!1}},[t._l(t.uploadImgArray,function(e,s){return i("van-swipe-item",{key:s,staticClass:"swipe-item",on:{click:function(e){return t.onExplainItemClick(s)}}},[i("img",{staticClass:"swipe-img",staticStyle:{position:"relative"},attrs:{src:e,alt:""}}),i("div",{staticClass:"delete"},[i("van-icon",{attrs:{name:"clear",size:"30px"},on:{click:function(e){return e.stopPropagation(),t.onItemDeleteClick(s)}}})],1)])}),t.uploadImgArray.length<5?i("van-swipe-item",{staticClass:"swipe-item"},[i("div",{staticClass:"swipe-img plus-div"},[i("van-uploader",{attrs:{"after-read":t.onRead,name:"uploadLoader","max-size":1048576},on:{oversize:t.uploadImgOversize}},[i("van-icon",{attrs:{name:"add-o",size:"80px"}})],1)],1)]):t._e()],2),t._m(1),t._m(2),i("div",{directives:[{name:"show",rawName:"v-show",value:t.missionDetail&&t.missionDetail.textVerify,expression:"missionDetail && missionDetail.textVerify"}],staticStyle:{"text-align":"center"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.textVerify,expression:"textVerify"}],attrs:{placeholder:"请添加文字验证"},domProps:{value:t.textVerify},on:{input:function(e){e.target.composing||(t.textVerify=e.target.value)}}})])],1),i("div",{staticClass:"submit"},[i("van-button",{staticClass:"left-button",attrs:{type:"danger",round:"",size:"large"},on:{click:t.onNavBarLeftPressed}},[t._v("取消")]),i("van-button",{attrs:{type:"primary",round:"",size:"large"},on:{click:t.onCreateMissionButtonPressed}},[t._v("提交")])],1)])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"text-align":"center"}},[i("span",[t._v("验证图")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"text-align":"center"}},[i("span",[t._v("传图片，最多可上传5张")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"text-align":"center"}},[i("span",[t._v("提示：请诚信做单，骗单将被罚款，严重者封号。")])])}],n=(i("e7e5"),i("d399")),r=(i("7f7f"),i("96cf"),i("3b8d")),o=i("f122"),l=i("a651"),c={name:"FinishMission",data:function(){return{missionId:null,missionDetail:null,vanSwipeWidth:100,vanSwipeHeight:130,uploadImgArray:[],textVerify:""}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.missionId=this.$route.query.id,t.next=3,this.httpPost(o["h"],{id:this.missionId});case 3:e=t.sent,e.success&&(this.missionDetail=e.data);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{onNavBarLeftPressed:function(){this.$router.back()},onNavBarRightPressed:function(){this.$router.push({name:"MissionDetail",query:{id:this.missionId}})},getMissionTypeName:function(){var t=Object(l["b"])(this.missionDetail.typePropertyId);return t.name},onRead:function(t,e){this.uploadImgArray.push(t.content)},uploadImgOversize:function(){Object(n["a"])("单张图片最大尺寸为1MB")},onItemDeleteClick:function(t){this.uploadImgArray.splice(t,1)},onCreateMissionButtonPressed:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.uploadImgArray&&0!==this.uploadImgArray.length){t.next=3;break}return this.toastFail("请添加验证图"),t.abrupt("return");case 3:if(!this.missionDetail.textVerify||this.textVerify){t.next=6;break}return this.toastFail("请添加文字验证"),t.abrupt("return");case 6:return e={missionId:this.missionId,verifyImgList:this.uploadImgArray,textVerify:this.textVerify},t.next=9,this.httpPostWithLoading(o["d"],e);case 9:i=t.sent,i.success&&(this.toastSuccess("任务上传完成，请等待审核"),this.$router.back());case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},u=c,p=(i("1232"),i("2877")),m=Object(p["a"])(u,s,a,!1,null,"b997a2ae",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-0f8430dd.c10f3d9c.js.map