!function(){"use strict";var s=Object.prototype.hasOwnProperty;function u(t){return"function"==typeof t}var e=/^\$|getSubNVueById|requireNativePlugin|upx2px|hideKeyboard|canIUse|^create|Sync$|Manager$|base64ToArrayBuffer|arrayBufferToBase64/,n=/^create|Manager$/,r=/^on/;function i(t){return!(function(t){return n.test(t)}(t)||function(t){return e.test(t)}(t)||function(t){return r.test(t)}(t))}function f(t,o){return i(t)?function(n){void 0===n&&(n={});for(var r=[],t=arguments.length-1;0<t--;)r[t]=arguments[t+1];return u(n.success)||u(n.fail)||u(n.complete)?o.apply(void 0,[n].concat(r)):function(t){return t.then(function(t){return[null,t]}).catch(function(t){return[t]})}(new Promise(function(t,e){o.apply(void 0,[Object.assign({},n,{success:t,fail:e})].concat(r)),Promise.prototype.finally||(Promise.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})})}))}:o}var a="success",c="fail",o=[a,c,"complete"],g="__uniapp__service";function p(){}function l(t,e,n,r){if(t){if(void 0===n)return t[e]();var o=d(n,r)[1];return Object.keys(o).length?t[e](y(e,o)):t[e]()}}function v(t,e,n,r){if(t){var o=d(n,r),i=o[0],u=o[1];return Object.keys(u).length?t[e](i,y(e,u)):t[e](i)}}function h(t,e){return function t(e,n){if(!e||!n)return;if(n.data&&n.data.ref&&n.data.attrs&&n.data.attrs.id===e)return n.data.ref;var r=n.children;if(!r)return;for(var o=0,i=r.length;o<i;o++){var u=t(e,r[o]);if(u)return u}}(t,e._vnode)}function d(n,t){void 0===n&&(n={});var r=Object.create(null),e=function(t){var e=n[t];u(e)&&(r[t]=e,delete n[t])};return o.forEach(e),t&&t.forEach(e),[n,r]}function y(o,i){return function(t){var e=t.type;delete t.type;var n=i[e];if(e===a?t.errMsg=o+":ok":e===c&&(t.errMsg=o+":fail"+(t.msg?" "+t.msg:"")),delete t.code,delete t.msg,u(n)&&n(t),e===a||e===c){var r=i.complete;u(r)&&r(t)}}}function x(t,p,e){var l,v=[],h=t.requireModule("plus").postMessage,n=function(e){v.forEach(function(t){return t({origin:l,data:e})})};t.requireModule("globalEvent").addEventListener("plusMessage",function(t){"UniAppSubNVue"===t.data.type&&n(t.data.data,t.data.options)});var r=p.webview.currentWebview().id,d=new e("UNI-APP-SUBNVUE");d.onmessage=function(t){t.data.to===r&&n(t.data.data)};var o=function(n){n.$processed=!0;var e=p.webview.currentWebview().id===n.id,r="uniNView"===n.__uniapp_origin_type&&n.__uniapp_origin_id,o=n.id;if(n.postMessage=function(t){r?d.postMessage({data:t,to:e?r:o}):h({type:"UniAppSubNVue",data:t},g)},n.onMessage=function(t){v.push(t)},n.__uniapp_mask_id){l=n.__uniapp_host;var i=n.__uniapp_mask,u=p.webview.getWebviewById(n.__uniapp_mask_id);u=u.parent()||u;var a=n.show,c=n.hide,s=n.close,f=function(){u.setStyle({mask:"none"})};n.show=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return u.setStyle({mask:i}),a.apply(n,t)},n.hide=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return f(),c.apply(n,t)},n.close=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return f(),s.apply(n,t)}}},i=function(t){var e=p.webview.getWebviewById(t);return e&&!e.$processed&&o(e),e};return{getSubNVueById:i,getCurrentSubNVue:function(){return i(p.webview.currentWebview().id)}}}var b,m=!1,w=0,M=0;function _(t,e,n){return t[e].apply(t,n)}var B=function(t,e){this.id=t,this.ctx=e};B.prototype.getCenterLocation=function(t){return l(this.ctx,"getCenterLocation",t)},B.prototype.moveToLocation=function(){return l(this.ctx,"moveToLocation")},B.prototype.translateMarker=function(t){return v(this.ctx,"translateMarker",t,["animationEnd"])},B.prototype.includePoints=function(t){return v(this.ctx,"includePoints",t)},B.prototype.getRegion=function(t){return l(this.ctx,"getRegion",t)},B.prototype.getScale=function(t){return l(this.ctx,"getScale",t)};var S=function(t,e){this.id=t,this.ctx=e};S.prototype.play=function(){return l(this.ctx,"play")},S.prototype.pause=function(){return l(this.ctx,"pause")},S.prototype.seek=function(t){return v(this.ctx,"seek",t)},S.prototype.stop=function(){return l(this.ctx,"stop")},S.prototype.sendDanmu=function(t){return v(this.ctx,"sendDanmu",t)},S.prototype.playbackRate=function(t){return v(this.ctx,"playbackRate",t)},S.prototype.requestFullScreen=function(t){return v(this.ctx,"requestFullScreen",t)},S.prototype.exitFullScreen=function(){return l(this.ctx,"exitFullScreen")},S.prototype.showStatusBar=function(){return l(this.ctx,"showStatusBar")},S.prototype.hideStatusBar=function(){return l(this.ctx,"hideStatusBar")};var N=function(t,e){this.id=t,this.ctx=e};N.prototype.start=function(t){return l(this.ctx,"start",t)},N.prototype.stop=function(t){return l(this.ctx,"stop",t)},N.prototype.pause=function(t){return l(this.ctx,"pause",t)},N.prototype.resume=function(t){return l(this.ctx,"resume",t)},N.prototype.switchCamera=function(t){return l(this.ctx,"switchCamera",t)},N.prototype.snapshot=function(t){return l(this.ctx,"snapshot",t)},N.prototype.toggleTorch=function(t){return l(this.ctx,"toggleTorch",t)},N.prototype.playBGM=function(t){return v(this.ctx,"playBGM",t)},N.prototype.stopBGM=function(t){return l(this.ctx,"stopBGM",t)},N.prototype.pauseBGM=function(t){return l(this.ctx,"pauseBGM",t)},N.prototype.resumeBGM=function(t){return l(this.ctx,"resumeBGM",t)},N.prototype.setBGMVolume=function(t){return v(this.ctx,"setBGMVolume",t)},N.prototype.startPreview=function(t){return l(this.ctx,"startPreview",t)},N.prototype.stopPreview=function(t){return l(this.ctx,"stopPreview",t)};var P,k,C,$,A=Object.freeze({upx2px:function(t,e){if(0===(t=Number(t)))return 0;var n=t/750*(e||w);return n<0&&(n=-n),0===(n=Math.floor(n+1e-4))?1!==M&&m?.5:1:t<0?-n:n},$on:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return _(b(),"$on",[].concat(e))},$once:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return _(b(),"$once",[].concat(e))},$off:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return _(b(),"$off",[].concat(e))},$emit:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return _(b(),"$emit",[].concat(e))},createMapContext:function(t,e){var n=h(t,e);return n||global.nativeLog("Can not find `"+t+"`","__WARN"),new B(t,e.$refs[n])},createVideoContext:function(t,e){var n=h(t,e);return n||global.nativeLog("Can not find `"+t+"`","__WARN"),new S(t,e.$refs[n])},createLivePusherContext:function(t,e){var n=h(t,e);return n||global.nativeLog("Can not find `"+t+"`","__WARN"),new N(t,e.$refs[n])}});function E(n,t,e,r){var o=x(t,e,r),i=o.getSubNVueById,u=o.getCurrentSubNVue,a=Object.assign({getSubNVueById:i,getCurrentSubNVue:u,requireNativePlugin:t.requireModule},function(t){var n={onNavigationBarButtonTap:p,onNavigationBarSearchInputChanged:p,onNavigationBarSearchInputConfirmed:p,onNavigationBarSearchInputClicked:p};t.requireModule("globalEvent").addEventListener("plusMessage",function(t){n[t.data.type]&&n[t.data.type](t.data.data)});var r=Object.create(null);return Object.keys(n).forEach(function(e){r[e]=function(t){n[e]=t}}),r}(t),function(t){var e=t.requireModule("plus");return{postMessage:function(t){e.postMessage(t,g)}}}(t));if("undefined"!=typeof Proxy)return new Proxy({},{get:function(t,e){return A[e]?A[e]:a[e]?a[e]:function(t,e){return s.call(t,e)}(n,e)?f(e,n[e]):void 0}});var c={requireNativePlugin:t.requireModule};return Object.keys(A).forEach(function(t){c[t]=A[t]}),Object.keys(a).forEach(function(t){c[t]=a[t]}),Object.keys(n).forEach(function(t){c[t]=f(t,n[t])}),c}var t={create:function(t,e,n){return{initUniApp:function(t){var e=t.nvue,n=t.getUni,r=t.getApp,o=t.getUniEmitter,i=t.getCurrentPages;P=n,k=r,C=o,$=i,function(t){var e=t.config.env;M=e.scale,w=Math.ceil(e.deviceWidth/M),m="iOS"===e.platform}(e),function(t){b=t}(o)},instance:{getUni:function(t,e,n){return E(P(),t,e,n)},getApp:function(){return k()},getUniEmitter:function(){return C()},getCurrentPages:function(){return $()}}}},refresh:function(t,e,n){},destroy:function(t,e){}};service.register("UniApp",t)}();
//# sourceMappingURL=uni-app-service.min.js.map
